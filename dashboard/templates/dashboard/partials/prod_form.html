
{% extends 'main_alt.html' %} {% load static %} {% block content %}
<div class="w-full max-w-7xl mx-auto flex flex-col gap-4">
    <div class="flex justify-between items-center">
    <h3 class="bg-teal-900 rounded-full text-white py-2 px-4">
      <a
id="back-button"
class="inline-block px-2 py-1 text-white bg-teal-900 hover:bg-yellow-400 hover:text-black rounded-full transition-all duration-300"
href="#"
>&larr;</a
>
      Ajouter un produit
      <i class="fa-solid fa-boxes-stacked ml-2"></i> 
    </h3>
    <a
      href="{% url 'deliveries' %}"
      class="bg-yellow-100 rounded-full py-2 px-4 text-xs flex items-center gap-4 group"
      >Nouvel arrivage
      <span
        class="bg-yellow-400 rounded-full py-2 px-3 group-hover:bg-teal-900 group-hover:text-white"
        >&rarr;</span
      ></a
    >
  </div>

    <form
      class="w-full max-w-3xl mx-auto p-4 bg-yellow-100 rounded-xl flex flex-col gap-3 text-sm"
      hx-post="{{ request.path }}"
      action=""
      enctype="multipart/form-data"
    >
      {% csrf_token %}

      <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
        <div>
          <h3 class="mb-1">{{form.name.label}}</h3>
          {{form.name}}
        </div>
        <div>
          <h3 class="mb-1">{{form.brand.label}}</h3>
          {{form.brand}}
        </div>
        <div>
          <h3 class="mb-1">{{form.category.label}}</h3>
          {{form.category}}
        </div>
        <div>
          <h3 class="mb-1">{{form.subcategory.label}}</h3>
          {{form.subcategory}}
        </div>
        <div>
          <h3 class="mb-1">{{form.unit.label}}</h3>
          {{form.unit}}
        </div>
        <div>
          <h3 class="mb-1">{{form.quantity.label}}</h3>
          {{form.quantity}}
        </div>
        <div>
          <h3 class="mb-1">{{form.price.label}}</h3>
          {{form.price}}
        </div>
        <div>
          <h3 class="mb-1">{{form.promo_price.label}}</h3>
          {{form.promo_price}}
        </div>
        <div>
          <h3 class="mb-1">{{form.production_date.label}}</h3>
          {{form.production_date}}
        </div>
        <div>
          <h3 class="mb-1">{{form.expiration_date.label}}</h3>
          {{form.expiration_date}}
        </div>
        <div>
          <h3 class="mb-1">{{form.image.label}}</h3>
          {{form.image}}
        </div>
      </div>
      <div>
        <h3 class="mb-1">{{form.description.label}}</h3>
        {{form.description}}
      </div>

      <div class="flex flex-row-reverse gap-2 items-end text-xs">
        <button
          class="px-4 py-2 bg-teal-700  hover:bg-teal-900 text-white rounded-full"
          type="submit"
        >
          {% if not curr_obj %} Ajouter {% else %} Enregistrer {% endif %}
        </button>
        <button
          onclick="close_modal()"
          type="button"
          class="modal_closer px-4 py-2 bg-white text-black hover:bg-red-300 rounded-full"
        >
          Annuler
        </button>
      </div>
    </form>
</div>
{% if not curr_obj %}
<script>
  $(document).ready(function () {
    // Add a placeholder option to the select element
    $(".input_selector").children().first().remove();
    $(".input_selector").prepend(
      '<option value="" disabled selected></option>'
    );
  });

document
  .getElementById("back-button")
  .addEventListener("click", function (event) {
    event.preventDefault(); // Prevent the default anchor behavior
    window.history.go(-2); // Go back two pages
  });
</script>
{% endif %} {% endblock %}
